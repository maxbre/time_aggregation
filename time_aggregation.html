<!DOCTYPE html>
<!-- saved from url=(0014)about:internet -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="x-ua-compatible" content="IE=9" >

<title>my little reminder for (just some) time aggregation methods</title>

<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 12px;
   margin: 8px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 { 
   font-size:2.2em; 
}

h2 { 
   font-size:1.8em; 
}

h3 { 
   font-size:1.4em; 
}

h4 { 
   font-size:1.0em; 
}

h5 { 
   font-size:0.9em; 
}

h6 { 
   font-size:0.8em; 
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre {	
   margin-top: 0;
   max-width: 95%;
   border: 1px solid #ccc;
   white-space: pre-wrap;
}

pre code {
   display: block; padding: 0.5em;
}

code.r, code.cpp {
   background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * { 
      background: transparent !important; 
      color: black !important; 
      filter:none !important; 
      -ms-filter: none !important; 
   }

   body { 
      font-size:12pt; 
      max-width:100%; 
   }
       
   a, a:visited { 
      text-decoration: underline; 
   }

   hr { 
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote { 
      padding-right: 1em; 
      page-break-inside: avoid; 
   }

   tr, img { 
      page-break-inside: avoid; 
   }

   img { 
      max-width: 100% !important; 
   }

   @page :left { 
      margin: 15mm 20mm 15mm 10mm; 
   }
     
   @page :right { 
      margin: 15mm 10mm 15mm 20mm; 
   }

   p, h2, h3 { 
      orphans: 3; widows: 3; 
   }

   h2, h3 { 
      page-break-after: avoid; 
   }
}

</style>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: rgb(88, 72, 246)
   }

   pre .number {
     color: rgb(0, 0, 205);
   }

   pre .comment {
     color: rgb(76, 136, 107);
   }

   pre .keyword {
     color: rgb(0, 0, 255);
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: rgb(3, 106, 7);
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>




</head>

<body>
<h1>my little reminder for (just some) time aggregation methods</h1>

<h3>obviously many others are also possible but not here contemplated (known)!</h3>

<hr/>

<h2>generate some fake data to play with</h2>

<h4>time sequence using POSIXct class (storing date-time and many other features like tz, dst); the genreal rule of thumb is to stick with the simplest date/time class one needs (&hellip;and that&#39;s why I&#39;m keeping up with the most complex and dangeorus one, ugh!)</h4>

<pre><code class="r"># start and end of time seq
start &lt;- as.POSIXct(&#39;2014-05-01 00:00:00&#39;)
end &lt;- as.POSIXct(&#39;2014-05-02 00:00:00&#39;)

# by sec
bysec&lt;-as.POSIXct(seq(start, end, by=&quot;sec&quot;))
#alternatively   
bysec&lt;-as.POSIXct(seq(start, end, by=1))

# by min
bymin&lt;-as.POSIXct(seq(start, end, by=&quot;min&quot;))
# alternatively   
bymin&lt;-as.POSIXct(seq(start, end, by=60))

# by hour
byhour&lt;-as.POSIXct(seq(start, end, by=&quot;hour&quot;))
# alternatively 
byhour&lt;-as.POSIXct(seq(start, end, by=60*60))

# and so on for other time intervals...

# eg. by 15 minutes
by15min&lt;-as.POSIXct(seq(start, end, by=&quot;15 mins&quot;))
# alternatively   
by15min&lt;-as.POSIXct(seq(start, end, by=60*15))
</code></pre>

<h4>build up a df with 3 vars using &ldquo;bymin&rdquo; time sequence</h4>

<pre><code class="r">set.seed(123)
v1&lt;-rnorm(length(bymin), 5)

set.seed(456)
v2&lt;-rnorm(length(bymin), 10)

# here using bymin as time seq
df&lt;-data.frame(date=bymin,v1, v2)

# introduce some random NAs
df[sample(nrow(df),20),&quot;v1&quot;]&lt;-NA
df[sample(nrow(df),10),&quot;v2&quot;]&lt;-NA

summary(df)
</code></pre>

<pre><code>##       date                           v1             v2       
##  Min.   :2014-05-01 00:00:00   Min.   :2.19   Min.   : 7.04  
##  1st Qu.:2014-05-01 06:00:00   1st Qu.:4.35   1st Qu.: 9.38  
##  Median :2014-05-01 12:00:00   Median :5.01   Median :10.05  
##  Mean   :2014-05-01 12:00:00   Mean   :5.01   Mean   :10.06  
##  3rd Qu.:2014-05-01 18:00:00   3rd Qu.:5.65   3rd Qu.:10.76  
##  Max.   :2014-05-02 00:00:00   Max.   :8.39   Max.   :13.06  
##                                NA&#39;s   :20     NA&#39;s   :10
</code></pre>

<pre><code class="r">str(df)
</code></pre>

<pre><code>## &#39;data.frame&#39;:    1441 obs. of  3 variables:
##  $ date: POSIXct, format: &quot;2014-05-01 00:00:00&quot; &quot;2014-05-01 00:01:00&quot; ...
##  $ v1  : num  4.44 4.77 6.56 5.07 5.13 ...
##  $ v2  : num  8.66 10.62 10.8 8.61 9.29 ...
</code></pre>

<h2>aggregation through base methods (no packages)</h2>

<hr/>

<h3>mean by hour using format</h3>

<pre><code class="r">head(aggregate(df[c(&quot;v1&quot;,&quot;v2&quot;)], format(df[&quot;date&quot;],&quot;%Y-%m-%d %H&quot;), mean, na.rm = TRUE))
</code></pre>

<pre><code>##            date    v1     v2
## 1 2014-05-01 00 5.057 10.194
## 2 2014-05-01 01 4.965  9.970
## 3 2014-05-01 02 5.012  9.787
## 4 2014-05-01 03 4.963 10.198
## 5 2014-05-01 04 5.194 10.023
## 6 2014-05-01 05 4.987 10.263
</code></pre>

<pre><code class="r">#alternatively
head(aggregate(df[c(2,3)], format(df[1],&quot;%Y-%m-%d %H&quot;), mean, na.rm = TRUE))
</code></pre>

<pre><code>##            date    v1     v2
## 1 2014-05-01 00 5.057 10.194
## 2 2014-05-01 01 4.965  9.970
## 3 2014-05-01 02 5.012  9.787
## 4 2014-05-01 03 4.963 10.198
## 5 2014-05-01 04 5.194 10.023
## 6 2014-05-01 05 4.987 10.263
</code></pre>

<h3>mean by hour using cut</h3>

<pre><code class="r"># see cut.POSIXt for refs
head(aggregate(df[c(&quot;v1&quot;,&quot;v2&quot;)], list(date=cut(df$date, breaks=&quot;hour&quot;)), mean, na.rm = TRUE))
</code></pre>

<pre><code>##                  date    v1     v2
## 1 2014-05-01 00:00:00 5.057 10.194
## 2 2014-05-01 01:00:00 4.965  9.970
## 3 2014-05-01 02:00:00 5.012  9.787
## 4 2014-05-01 03:00:00 4.963 10.198
## 5 2014-05-01 04:00:00 5.194 10.023
## 6 2014-05-01 05:00:00 4.987 10.263
</code></pre>

<h3>mean by 15 mins using cut</h3>

<pre><code class="r">head(aggregate(df[c(&quot;v1&quot;,&quot;v2&quot;)], list(date=cut(df$date, breaks=&quot;15 mins&quot;)), mean, na.rm = TRUE))
</code></pre>

<pre><code>##                  date    v1     v2
## 1 2014-05-01 00:00:00 5.152 10.118
## 2 2014-05-01 00:15:00 4.753 10.345
## 3 2014-05-01 00:30:00 5.277 10.012
## 4 2014-05-01 00:45:00 5.061 10.301
## 5 2014-05-01 01:00:00 4.869  9.825
## 6 2014-05-01 01:15:00 5.180  9.998
</code></pre>

<h3>plot means by hour</h3>

<pre><code class="r">#aggregate data by hour
means&lt;-aggregate(df[c(&quot;v1&quot;,&quot;v2&quot;)], format(df[&quot;date&quot;],&quot;%Y-%m-%d %H&quot;), mean, na.rm = TRUE)
str(means)
</code></pre>

<pre><code>## &#39;data.frame&#39;:    25 obs. of  3 variables:
##  $ date:Class &#39;AsIs&#39;  chr [1:25] &quot;2014-05-01 00&quot; &quot;2014-05-01 01&quot; &quot;2014-05-01 02&quot; &quot;2014-05-01 03&quot; ...
##  $ v1  : num  5.06 4.97 5.01 4.96 5.19 ...
##  $ v2  : num  10.19 9.97 9.79 10.2 10.02 ...
</code></pre>

<pre><code class="r">#create x axis temporal sequence (POSIXct) to be plotted
means$date&lt;-seq(df$date[1],df$date[nrow(df)], length=nrow(means))
str(means)
</code></pre>

<pre><code>## &#39;data.frame&#39;:    25 obs. of  3 variables:
##  $ date: POSIXct, format: &quot;2014-05-01 00:00:00&quot; &quot;2014-05-01 01:00:00&quot; ...
##  $ v1  : num  5.06 4.97 5.01 4.96 5.19 ...
##  $ v2  : num  10.19 9.97 9.79 10.2 10.02 ...
</code></pre>

<pre><code class="r">#plot the chart with formatted x axis
plot(means$date, means$v1, type=&quot;l&quot;)
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-6"/> </p>

<h4>NB: many other formatting (aggregating) time sequences are also possible, see ?strptime for reference to further abbreviations</h4>

<h2>aggregation through some dedicated package methods</h2>

<hr/>

<h2>library zoo (just some relvant examples)</h2>

<pre><code class="r">require(zoo)
</code></pre>

<pre><code>## Loading required package: zoo
## 
## Attaching package: &#39;zoo&#39;
## 
## The following objects are masked from &#39;package:base&#39;:
## 
##     as.Date, as.Date.numeric
</code></pre>

<h3>myzoo object</h3>

<pre><code class="r">myzoo&lt;-zoo(cbind(df$v1,df$v2),df$date)
str(myzoo)
</code></pre>

<pre><code>## &#39;zoo&#39; series from 2014-05-01 to 2014-05-02
##   Data: num [1:1441, 1:2] 4.44 4.77 6.56 5.07 5.13 ...
##   Index:  POSIXct[1:1441], format: &quot;2014-05-01 00:00:00&quot; &quot;2014-05-01 00:01:00&quot; ...
</code></pre>

<h4>note index() or time()</h4>

<h3>plot zoo series with lattice</h3>

<pre><code class="r">require(lattice)
</code></pre>

<pre><code>## Loading required package: lattice
</code></pre>

<pre><code class="r">xyplot(myzoo, screens=c(&quot;v1&quot;,&quot;v2&quot;),
       scales = list(y = list(relation = &quot;same&quot;))
       )
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-9"/> </p>

<pre><code class="r">xyplot(myzoo, superpose=TRUE, auto.key=list(text=c(&quot;v1&quot;, &quot;v2&quot;)))
</code></pre>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfgAAAH4CAMAAACR9g9NAAAAhFBMVEUAAAAAADoAAGYAOpAAZrYAgP86AAA6ADo6AGY6OmY6OpA6ZmY6ZrY6kNtmAABmADpmAGZmOpBmZjpmZmZmtv+QOgCQOjqQOmaQZgCQkGaQkLaQtpCQ29uQ2/+2ZgC2Zjq2Zma2///bkDrb25Db/9vb////AP//tmb/25D//7b//9v////ibAlMAAAACXBIWXMAAAsSAAALEgHS3X78AAAdm0lEQVR4nO3diZrcNo4A4EpiZTPZsbOZ7SQ7O2Nn3DtmH3j/99uuriIIkOAlURIlAp/drYMHiF9Sld1O6gIaQ8Zl7wQ09gmFHzQUftBQ+EFD4QcNhR80FH7QUPhBQ+EHDYUfNBR+0FD4QUPhBw2FHzQGhH/+6eveKXQQ48E/Xb5X+JHgn3/+Bq+/f/7y3T/0joeR4N/Q3/GFR/1UELvkvGKMAw+PH6+/9DX+FgPBP//877ebXuFvMRD86+//uD7pFf49BoKHx8v1Sa/w7zES/PN/fH7/pvAwFrwGCYUfNBR+0FD4QWM4+OcfL5eHvZPoIEaDf/nls313P3aMA3/7Ic3fP7xtftFbfiB4/CHN+13PwhTELjmvGOPA4w9pXn/7uHcqHcRA8Pcf0rx8UncYCv72Q5rnH/UF/hoDwb//kEbd7zES/PWPcY+Xayj+UPAaJBR+0FD4QUPhBw2FHzQUftBQ+EFD4QcNhR80FH7QUPhBQ+EHDYUfNBR+0FD4QUPhBw2FHzQUftBYDL/FlaNztJ9D4QedQ+EHnUPhB51D4Qedo6zdReMUUQ9feBlpdB0KP2go/KCh8IOGwg8aCj9oKPygofCDhsIPGgo/aCj8oKHwg4bCDxoKP2go/KCh8IOGwg8aCj9oKPygofCDhsIPGgo/aCj8oDEm/Ok+Tqg+FH7QOBV8see28F1eZgq/fij82jEyfO0kCr9+KPzaofDlofDrh8KvHaPBm8h2SSj8+qHwa4fCl0fP8NUFGx6+YiaFXz8UvjIUvmJghV9l5EWh8JWh8JmBFL62w0KKyu6bw5dMeDL4wi7xZkUDbAMfdlP4SJst4Ss0Fb4yFD5zROFxR+FLJ1T4+jkVfuVQ+MwRhced+fAVNVP4lUPhM0f6gm/3t2L9wJtwtz94o/BzRi6BN2R3DnxdaRS+uI3Cl8+j8PyQfGZA+KfL5QFe//iabpXKbn6YxJ54lC6+YmR6SKj2avCZIXaFf/39M3x52BM+c7soPG43hX/59RvAn/+cA7/8AlD4zJGV7/i3L3/ZCt4EO0eG98c0keOlSW75Gv/809f7l1QrKRsTHCmIFLw4zAx4uc1S+DDzY8OztsFHFEqxAbwBaVPh14IvazUgfHAhHB/+5dP7Tf59X4/6RfBGbqPwPJ5//pboIYUJZu8Z3kc5GjwZu/Gj/vEh0UOKZfB+PQvhzf3rceDzmS6AL6j4Cq/xwbIODW+2hA+fX/HT3hh27e9jnwbeW00hvDyvwr/HjvDS4VbwxmvmTWGYQTgQa26CVy8P2nj7Cu/yExvGOrMGO8LfBvHhbXG9pKPwxs0WhRevqBHhjacXhef34ujw9lVpF3izAN4Q+IDwVPD3TA0dAbyBBXjvQMfwCYAt4Rmnwl/jWPBYH6liXcKbleDtNdUnvBFqQloKR5bD+28Pgqnmw+PQXcIbhae9wql8eI5i/F69w9uex4D3XNzhGni6xCi8Iadtgjl49jRw8KYxvDkfvPsz5TbwtkR9weNdnYana2MZHx0+zH82vL1HJHhjv68Lj4nVwbs0MM8x4L1MWsGbcnicbX94Myw8wXHHWIVi8PTRXg2PY+8KbxSeH9sa3oAbymUjwd/frxq6NJJcAE+fSxXwJsh4GXxavzW8OTo8fa9tFxSDd9muCU+0x4I3WJhh4LErr5NxuZ4B3gkI8GYufHj/dAFv5sHbdxmYmIO3OXQNb0uyH7whtxzYfZKNwhf1CKMQ3rCbDoAUA/c4vEnDGxGeTCHB2xRJmXx4Mwee5mBWh8frs3N4V4128CYL78paDO+4C+CtiR0Dc6iHNyR9YDPR+XDdHcEbVlVq0B28aQtvcAzMIQ1PsSvhjQRvFB5nQ26wfOXwph94f75u4U0ZPF4mi+Ht8AG8TYTC2wmi8JgShyeJYYFL4d1+ETxegUeEJ/dIU3izFbwNcFXOwrPLMwlv5sDjis4GT7jd1lJ4UuIsvBs8Dk8LHIU3SXiXdBU8PieOBI97lfC4qGp44xKxI7eBd3fgRvBgsJlxqR8W3tXSgydlEOHN6vDGVbYjeOfbMTxuAv8mwLOGaXhDTltuBu+KXAhPy0Rzroanl6VNksFjRnl4m3ACniQnwJsjwXs8rtzrwpsm8PbhgeI+vFsGgceBzghPahmHJyDkGRbA26I2gDchvEtf4WvgDamcpyrA+01CeLe8GngThTdYoLbwiEkNOLybWoa3SyqFJ3EOeFMIjwO5JlvDm1J4unpvYQp/KHiH6sGzV5MUPFtXDt4E8CyADH5f7kHhXVWS8O7Gc+ufB2+WwrsVReHpEgmacfAmA8/LQMboAJ6KZeCN8Zuk4MPzXNWuH+jWFvCmCj4Ipjkf3q+IwpfDE9228DT3INaCNwPBmyi8fxqHWwJv1oC/365uKqd4dHgTh/fWsQCeZNAKnkyyFbxReFa8KDx5qtAMdoQ3pJscCh+uYxv4+6GZ8KZn+KR8D/DeWtaDd/XFViI8LbOfYWN4PzGFF6o1F16oL7ZqDW84fNg/Ei3hsc054clSyf7u8GwKoX8kCuCjw/QG720uhw/Oz4QXDjWElzMvhecPsQBe7ksT6g+e5zkXntVlFjyEh44OH+6eEB5S8OSRKdc+Bn/bogMDO81QZXj5OkksRcxb4SPVysHbw3Pgw0zdsZ7hE1krvGvcBbx8XoI3h4HHVG0atfBGqiTpPBL8/esx4YPEtoGPFaQtfOQBpfA7wwvKm8BLKSV2ObzfbBf4p/fPnXvItOoPXhhB4Svg3z9UuPyzZd28LeGBV30XeD9/KbsF8HLGO8K/f4w4FH9+vJs3B89PLoGPLD1sYOEhOGS/xuHZOB68N5mc02x42An+l5XueH6yEXw43DJ4w097+W8Ab3aDX+01np/cDN4fzTCuhfC4L4xzOHjWNvsx4m7eXeHlIwo/Fz7fyps3klgO3j9dAB97yq4B74mvBo8z7/IaX/cx4t68kcTil3e2w+3n1WH/JfBR89jIs+GT93Vka687vu5jxL15I4n1CB/2Za4hPOwJn64vSX4+fN3HiHvzykly+AL7fuDZy8IMeC9fd7ZD+GSPefC5IgUdSuCBtxMmF+DJftfwfo8jwYuPubIrOQ8Pm8CDtFMI700N3vEkfNijCB52gvcyPhE8v7bT8Hx5c+Cl66tneFxLIXz4PCN1IWX24IG0OAQ8SI3Iqsrh/UcrPXkieMLmwcN74UrhYSV4ul8Mj4saDZ7sHRIe/HamAp5gN4fHObaBp1VpCg+Hgff/6JWCJ4uqgJcmN8FJnEPh3WDifit4nmAbeEZMJoewNWnZB7yAwhe6OjwtMh/cb8nb0+yS8IDDkXfv9fBMOAvvtyYt94EH/GnKoeCF9jS7XeHDyX149x8S2Y5dw7PSik1cjW6TkNVaeF5v4cHpnkQZeP6k6hseFwO0zY7wRoaXXAGTZl94vXx4IJ23gLcrccfY2sjJFPzdlyQiwNOr2o4wGDyp3gJ4VseO4Mmi2sDffnkdd4N3WWfgSSHB0PxNJTy5zmi5auDpgSXwty033a0m9wbgKpSBZ3dzETx+HQIe1oMHhT8TPB2xAN4miqKY74rwcBb4kD4Bj6UAHOmY8HaoWng4K7xdtK0VVjMFD/SMBw9ueh/eXhUivOvXAp5UohzeS8vCCvBYn/PBA8m/ITxsCW/zLYQHftGfBh4K4clVwuFtLZvA+4kaeiwHj6IK3wAeIvC2mOvAO1QPHqLwLhECT9ZG86iHdwuwR48GT5bVEt5uUHgAQzNg8OBmzMK7Ow7hgeTYEB5zVvg4PK0LubWr4AE3ZXhbtRg8zp6Ad0WvhQe3wDnwuJYDwLulLYK3GLPgqeRq8LQEZ4d360/Cu2sESuGtEkECGR5dfHhSyBg8zIKnRV8F3iZ1SnjkXwxvW0Tg8fpYER4wDzZOGbxNHgc7ITxACt6WA1wzW9Xu4R2vsavy4e1aXPXODE8efnF4590PvEvxAPB04CxjA3iyfoTH0pXBezd6DN6a88VReEynEh4K4EGEt60K4DFhH55etThQGt46Hw7elqANPNZuCbxbyobwYGgqNfDYz5HvAk/KiaUI4AGLStbdCB52gqfo5fBu07tqcaD7V/tackR4e2MYdxbXzeHpoKQB9AsPCi/D0xsjBo+3TTN4aAPvMpgJD2R6uuoA3k2BA9mjhgxYAB9zusaK8NAYHkgx7LCl8Exma3ggr1d0HbQjsPwgD++64emTwUOwVQQP1fBwJHjSbSh4V1kPnraqhWeXTVfwNicRHhfVNzzxisHb1njC21oCj6Pn4GFFeJ6wwvcIDyvDk/UdGJ7ObfN38GSjCp4NT76tAM/nCOAhhOenudNA8LA3PGsVh4cW8Pe1LYZneSv8YeD9lNrCs8FFeJqDIcltDQ8cnnmTNGfB0wGCYf3TBD6sQxE8kBf9efBYhNbw0oo7hCfZAauxCZe3DTysBB+kBwq/Gzyk4Fma4dMzAu/GbwjvJS8M2Ds8XzPPDkiNjVDqveB5in3DR0QN5tQzvH92Dny4wwdaAu+y2BYe+xTAT34flpzCC3PB1vBphDAUPjJBZIcPtBO8n1mOQIoYPDuQgM/PqvAlYyXgYz2ltZXHmeB5guHZ08EnB86E+NrQOzywcsdPTqnLYn14obp5eJba5vAwOLw4WjiCwqdmOC88bAm/LKbgyIDwttHo8EIovDSacMT7C+HDw4PCC6MJRw4Mn44t4J8uHx4v333OtIpktgS+YJZIw2L4oHNi0gPA3041gn/94+vjB3j59VuyVSyzneHBJJpJ8GXTHAMelsG/kT99vPK/n89+jHgkQ/mgwtvoEH7mHZ+c+jTwFd3T0SH8zNf45NQK70ctfKJbM/h0j1wkp1Z4Gy3hI9tBKHz1NAqfD4W/RUZW4Qt7phv2Bz8pPA2Fx/PFaWS7jQOf6pqFnzMo2e4QnsaO8MnoHp4W1oOfSse4DaTwNKZUYq3h50wQg4daKoVnkcxb4QuGzZxX+JkTKHy0x6KYt9yaXg3h86dSrRWexvHhp/CQ3FrhaSh8Qdcl3RS+9lx+qhi83EXhWWwHn/srrsjgCh/tsShmwxd3PAR8zYKkJOJxevjoQMvgp4SXwi8Ihbf9FL6sVx/wfiICvN1TeBaZasTPHAGe7e0EnwyFj46k8PEei0LhyVBz4hDwQpJT4uTw8CWofcJPyV1+6CjwLGOFl6MEfoqeVPhEj5o20dgH/l6WteFTDUx2WoWP90iEh6rwieQUPugtdlX48jbR6AB+SghMUtcm8OLhNvATbAw/5wroCn7iDWAGvFiDHLxcwV7go50VPrIdGSFsuwDeS1nhU/BTCn4Keit8vGfB+JEYED7hLcMLpxU+GhH4W1FOBM+VFV7h6SqEx543lJS2lJS8kC7gBWlvNw8/BUfo8P6B48FP/GsdvJC2wjeDnxrDT64XBF9PAO9WsQ+8/E5c4cPoBp7+DuBJoc4GP50OnlctA8/xbWc8uhh+8o7kNgrhJ4R3tBzeLmdy1wrw9Sh8O3ifeQX495QVHqMJ/HRQ+MmlWAPv1i4lORM+eym0hSeXb+/wk1hB2kjh4z2C6Tg8WdByeP8NEs65OfxUDD+R7yn4YFHHh/eL1xAevxXBM1M2Tg5+8k8vhOf8Prx/sQnwk39C4cvggydHG3hcfBN4/0Kla6QnJt441imIzeGn7uHx9I7wE4ef+Dk/W4W38PQIzkCTzMNPlfBTBt7WQ4DHnu6i9eFJhwPATyTl1vDUvxie5pKGn+bDk6n2gXdXbyqOAj9BMfzE4bH7BvBudRR+qoK3R4HMKsBPLFuGwJYUix3gJ4WfAR/Lf7LzhItIxt7wE2IBLr4SnjM3h596hZ9ItuQu2gneatbCT7hwDm8LlYGfWAKUagY8y6lneNJncPhpGbwtegIenREeF7EU3jb2Jh0Snr5T7hJ+Wgd+opMeGd6toy94280lBwl48kReAO/SbQiPNXXFzcQm8BMrHod3T0xc3Fz4KQovFs7dJSl4nnsTeHJ3puDdw1LOX+HnwDuiteHdAg8F//TDv38r/4jRGvipMbylWAo/5eDx2bsY3o5fAI+1LIN3FYhFBv7198+PH8s/VFiCnxbDY/HwXiuAtzdVHj6UsBw4JOY+DPwb+eND+ceIV8DbpnvDTyTptvDTkeHhX1+f/wrPP7e/43PwuKAl8CQJO76Dt7nOgHenLJoHP7llNIV3qGvDv3x6u8e//5ppZSMNj+tcB36y8PZIM3icaRn8RKdzq6uHn3Lw7mKdDZ/u4QdFnQtPbrMkvOOYbHE4vB09CY9zJ+HdaZZyJ/BY05PCT3wsAd5W34O3hMETdj148uAS4KcKeJyqEj4n3yW8rU0M3lZ1Frwbug6eLKkdPL2wBHisZRTelaQfeFtBCd6Vew94UqxC+AnIrwp4O8S28FjAruHt8ufA2zosgrcVroMnxxvD24L5tbS6p4dHwjJ4QrQmPNGqhJ9I0wg8K5gA7xKU4VnOJ4B3pd4YfqKjHgSejLkDvANKwtNKJuGxzgyeldVv1zu8h1QJP/nwwphJ+i3g3do6gGfDxOAZLC375Md68FhLCZ4sGoKk9oGf+oJ3Z2PweGu5vEPfRvDTAviJdFT4ang+TBt4uoz7YArP1xaDRxoG74Yg63Z1cv0FeKwaORvAkzQUfk14RuFXsj28fxZI/clGO3g3WBY+XKVrOCQ8zdsNQdbt6sT55sPbCrua18H7C+LwRIl146ucRoP3atEMfjo/PE53CvjwrAePB8vg6a2RhBcmFybeHj5MJICP5PTedi94mseK8OKgxBs3Ani3n4GPHZJHSsKzVM4MTzJuCB82lJa/DD72EE3Pin9yTMDTZw1OloInmGzvxPDSXvfwUxbe23Fv95fDu8EV/pjw/iIme/JY8G5JM+HdKruHzz/qg52h4eNn3SrdOAeCj3YZC17OsgZeaLgE3p1sAj/NgXf7J4RPZhmrBW3BFpqGx4Nnhhdzcqf6gU9EETw7vQZ88shG8NISjwA/7QwvViUFfy92Fl64EmKqkHjpShZC4aMtjgKfayJHMGWwUTHcnvAxpuySoy2S8NHbgZ+YCx/LKdhX+HL40gZ9w9vDEG+yHXxKfjv4bAhNpYf54eALu4gnsYxudZ3DF60yu4I0vNA2Cs93hJ/8dAIfacv+xkqqSiyNg8OTH6zvCZ+6ND2NkeEhl1ZkkcIjeRa8fxHk4fnRNLyPwFer8PvDS6/sZ4d33RSej9snfHjGhxdqGnQCN33P8IJLP/BeiY8Ef2u5D3xWHybRJSzfpvB4t1TDQ5h5AjOyBPHIWPDQGD5WLREeCuHZbLXwED3jHSmCJ+XfCx4ODW9rNpEr2Z2Y5GPrw4MtyIHgI1irwHMKYdhgEN4TPHg3xLrw4jXK4G2Fi+FLGQ8PDweGhyPDIw2HBwkeyG9vBYvhXcMYfFg6hV8OP5XBU022gjnwcAR4soBgLQrvitIXPHuT7/55TQk8bRPCA/YYBR5oUfaDx2quCR/RJpsCPC8oWPkDwOP8QrktfAizAzx5W6jwi+Dt7CvDkz4z4WEJPLSBt30PC4/JL4IHAo9ricP7JcRe+NQJKuTn0QYeGsEHkvbsIeGDqm8HT+/JMGbA2/Zz4b21rAIPncCH9zyDJ2WZCw+22Tbw4B+7w7tdMmsMHgeZFsOT433Ck4IcDR5K4XEoIrIavMupN3jYER42gocCeJqqfaWIwIcZy/Bc+5jwpFi18K6GHjwQeKAF5SNI8DAbHgrhce0F8JCBBxm+mPFg8OzmwmHcZFF479IhWZfC2+0cvBOphwd6AYTwwH8fFR5ssWjR2sEDq/0CeGSeDw9l8DgbXnMHhse1dQPvGnQFD+eHt/oJeMDaOHi6ZIvmP14q4RFxL3gLfR/HzRbAe+h8XeB1KGCMkX55OCO8U9gSHg4C//4Jo/wzRs8JjxgxeFgLHrqEh8cPdXc8LR63wFUn4KEE3l/yseAhDu9WkocPqtAaHp4+IHz+Y8QXwNvauUoI8NL1LsPDZvB22nnwuGxXJIR3j8k94OHph/9pccdjJhO9HTm8W3kdfHiVFcJjykvh7TfbDdfA4dHXLttdMkCX3wU8PP+4AzwtZwCPN1YGHjMqggeaewW8Sz2EJ/4L4cmhreATPYJABnLHpeBxKcvgXfmi8DiSBE9SaQzPnlmoh8tuDe9up/3g8XcC3i2lLTxguRbCQwiPmTl4e86Dd8tbAO8Ldg1/35oFj0YZeMC1VsJDI3g8iEvPwQNZ9AJ4XNXx4W3XFLzjd/CsUDl4UuVu4WEO/H2QaWJL6QCep7wDvBuc3Pgz4V1mNfCuD2m/BB4OCA8BPPmWhafEC+GhHN67ODuGJ0veFB7YMpLwQFuRbQEeZHjrewB4lgc5vgQePHh+C3UKH+98bnjaXoZ3GWGbEeAhAg9ReAgqfe/WFD4YBmR4NyDZTcLzis2Hp714Qzn6gwcGT+tcAQ+z4XGqVvDYy1+kwkeG6B7em3AOfDCQwlfAQwreZULgERWwYAeFZ0XuHT4sgjhES3hgzdrAe5gKr/Cbw/N8jgvvXcaz4GOTkDfZcXh3qH/4cMn7w5NkSCYdw7uv28IHCz8pfD4U3rWZCZ+p85bwwZHUIPvAk9EcvButFJ61UvjgSGqQBHx4ix4APkzkfPCp3WxCQRv3x+Zd4NloRfDBbiwThU8OQsqzFTyZoV942k6c6JDwQnNa9J3hxSmq4cXrR+GD5t7d1h18/DqohSffFH5QeFD4FeDxSx18dIrY7kJ474JSeHp2H/hIpv7uivCpBBTeO6zw1xgQPjwrwPuHS+DlmZbD807dwieTkY8UDbAyfKRpTS3lmTaEj8wvRv/wXrcTwgvHEvD184uh8Nmm+YaZ7jXw/NS54JdFFL5wKoW/hcLHOyp8tMfi6evjOPDZXgq/YLyzwy9IQeGjHSJjxg9vBl8/WG3Lk8CXT1UBn518YS+FXzBeE/i5ky/spfALxlP4mS1Xh28do8Mvn/YWCr9g8oW9FL4mTgS/cii81EHhI9tlPXYIhW8z7eHgvVD4mdMq/Pqh8CvEEeB3CoWXOih8ZLusx/4xF36AODc8DYVnMQ58USj8LRR+0FD4QUPhBw2FHzSGg9e4hcIPGgo/aOTgny6XB3j9o/RjxDWOEhn4198/w5cHhT9fZOBffv0G8Oc/b/AFHyOucZQouOPfvvxF7/izRe41/vmnr/cvqVYahwt9Vz9oKPygofCDhsIPGgo/aCj8oKHwg4bCDxoKP2go/KCh8IOGwg8aCj9oKPygMQNe4xRRDV94Fa0VOkf7ORR+0DkUftA5FH7QORR+0DkUftA59E/og4bCDxoKP2go/KCh8IOGwg8aCj9ozIb/cvnu89u3l//6SnbvB4PdlnM8Xi4f1pvjfeP1t8vlh2/rzrFKraKJh3PMhX/64dvbL3i6fP/V7d4PBrtN53hT//Kw1hy3jU3mWKNWscSFOXLwz//56fLxy/Uy+nK9094uqe//dr1qHj9er9vX/73/jzNuu7evL79+o7v5pOvm+O9rm7XmwA14fFh3juefr0yN57glDiUeWfifvr58eni7jJ7/ev0/Jlz7/vL5Nvz7OizK+6496O+2nOPLB7u2NebAjacPwrKazvF0fyi3nUNOXJgjC//X98Zvz4+319bvPl+fI3/SK0y448PdpnO8nX36uNYcduPL7W3EinM8frj/vyfaziEnPueOtxO99aJXmH29sDfIktf4ujnsHb/KHLeN198ebjsrzoEKLeeIJT7nNd5O9Pzj5bu/PeBrin2HaBdD3jZe/+dJVe9U6+Z4u9I/rjfHrdX136d9XHeO6xvwh9bruCXupkx4VL6rL30iLQmdY4s5KuGv1+nHOfPoHJ3NoX9zN2go/KCh8IOGwg8aCj9oKPygofCDhsIPGgo/aCj8oDEu/PVvO9/ih//7aeW/T+8zxoUH78MYBguFf/vy+vvfL5ePT+8/73j5ZP9p3LlD4a/wv32A5x9v/yTmy8frP445fyj8+x3/+f0jmF5++Xz99yyr/xS9h1B4D/7T5bLwX7gfIxTegx/hbr+GwnP462v8ov+y4Sih8B7827N+hCf92PAjh8IPGgo/aCj8oKHwg4bCDxoKP2go/KCh8IOGwg8aCj9oKPyg8f+2q+OtUIOvjQAAAABJRU5ErkJggg==" alt="plot of chunk unnamed-chunk-9"/> </p>

<h3>mean by hour using format</h3>

<pre><code class="r">head(aggregate(myzoo, format(index(myzoo),&quot;%Y-%m-%d %H&quot;), mean, na.rm=TRUE))
</code></pre>

<pre><code>##                  V1     V2
## 2014-05-01 00 5.057 10.194
## 2014-05-01 01 4.965  9.970
## 2014-05-01 02 5.012  9.787
## 2014-05-01 03 4.963 10.198
## 2014-05-01 04 5.194 10.023
## 2014-05-01 05 4.987 10.263
</code></pre>

<h3>mean by 15 mins using cut</h3>

<pre><code class="r">head(aggregate(myzoo, cut(index(myzoo), breaks=&quot;15 mins&quot;), mean, na.rm=TRUE))
</code></pre>

<pre><code>##                        V1     V2
## 2014-05-01 00:00:00 5.152 10.118
## 2014-05-01 00:15:00 4.753 10.345
## 2014-05-01 00:30:00 5.277 10.012
## 2014-05-01 00:45:00 5.061 10.301
## 2014-05-01 01:00:00 4.869  9.825
## 2014-05-01 01:15:00 5.180  9.998
</code></pre>

<h3>rolling average by 5 mins (trailing average)</h3>

<pre><code class="r">head(rollapply(myzoo,width=5,mean, align=&quot;right&quot;, na.rm=TRUE))
</code></pre>

<pre><code>##                                 
## 2014-05-01 00:04:00 5.194  9.595
## 2014-05-01 00:05:00 5.649  9.799
## 2014-05-01 00:06:00 5.787  9.813
## 2014-05-01 00:07:00 5.222  9.703
## 2014-05-01 00:08:00 5.071 10.182
## 2014-05-01 00:09:00 4.956 10.440
</code></pre>

<h4>note that rollmean() does not handle NAs</h4>

<h3>rolling average by 5 mins (average at every 5 mins)</h3>

<pre><code class="r">head(rollapply(myzoo,width=5,FUN=mean, by=5,align=&quot;right&quot;, na.rm=TRUE))
</code></pre>

<pre><code>##                                 
## 2014-05-01 00:04:00 5.194  9.595
## 2014-05-01 00:09:00 4.956 10.440
## 2014-05-01 00:14:00 5.308 10.319
## 2014-05-01 00:19:00 5.109 11.578
## 2014-05-01 00:24:00 4.267  9.311
## 2014-05-01 00:29:00 4.884 10.148
</code></pre>

<h2>library xts</h2>

<h4>pretty similar to zoo object (derived by) but with some dedicated useful functions</h4>

<pre><code class="r">require(xts)
</code></pre>

<pre><code>## Loading required package: xts
</code></pre>

<h3>myxts object</h3>

<pre><code class="r">myxts&lt;-xts(cbind(df$v1,df$v2),df$date)
str(myxts)
</code></pre>

<pre><code>## An &#39;xts&#39; object on 2014-05-01/2014-05-02 containing:
##   Data: num [1:1441, 1:2] 4.44 4.77 6.56 5.07 5.13 ...
##   Indexed by objects of class: [POSIXct,POSIXt] TZ: 
##   xts Attributes:  
##  NULL
</code></pre>

<h3>mean by 15 mins</h3>

<h4>to note all dates are aligned to the end of each period by default</h4>

<pre><code class="r">head(period.apply(myxts,endpoints(myxts, &quot;mins&quot;, 15), mean, na.rm=TRUE))
</code></pre>

<pre><code>##                      [,1]   [,2]
## 2014-05-01 00:14:00 5.152 10.118
## 2014-05-01 00:29:00 4.753 10.345
## 2014-05-01 00:44:00 5.277 10.012
## 2014-05-01 00:59:00 5.061 10.301
## 2014-05-01 01:14:00 4.869  9.825
## 2014-05-01 01:29:00 5.180  9.998
</code></pre>

<h3>mean by 2 hours mins</h3>

<pre><code class="r">head(period.apply(myxts,endpoints(myxts, &quot;hours&quot;, 2), mean, na.rm=TRUE))
</code></pre>

<pre><code>##                      [,1]   [,2]
## 2014-05-01 01:59:00 5.011 10.082
## 2014-05-01 03:59:00 4.987  9.992
## 2014-05-01 05:59:00 5.091 10.143
## 2014-05-01 07:59:00 5.009 10.217
## 2014-05-01 09:59:00 5.006 10.020
## 2014-05-01 11:59:00 4.895  9.957
</code></pre>

<h3>xts has some useful facilities for subsetting</h3>

<pre><code class="r">#periodicity of dataset
periodicity(myxts)
</code></pre>

<pre><code>## 1 minute periodicity from 2014-05-01 to 2014-05-02
</code></pre>

<pre><code class="r">#subset one single record
myxts[&quot;2014-05-01 08:00&quot;]
</code></pre>

<pre><code>##                     [,1]  [,2]
## 2014-05-01 08:00:00 5.02 11.22
</code></pre>

<pre><code class="r">#subset starting from first rec up to...
myxts[&quot;/2014-05-01 00:05&quot;]
</code></pre>

<pre><code>##                      [,1]   [,2]
## 2014-05-01 00:00:00 4.440  8.656
## 2014-05-01 00:01:00 4.770 10.622
## 2014-05-01 00:02:00 6.559 10.801
## 2014-05-01 00:03:00 5.071  8.611
## 2014-05-01 00:04:00 5.129  9.286
## 2014-05-01 00:05:00 6.715  9.676
</code></pre>

<pre><code class="r">#subset first 5 recs
first(myxts, &quot;5 mins&quot;)
</code></pre>

<pre><code>##                      [,1]   [,2]
## 2014-05-01 00:00:00 4.440  8.656
## 2014-05-01 00:01:00 4.770 10.622
## 2014-05-01 00:02:00 6.559 10.801
## 2014-05-01 00:03:00 5.071  8.611
## 2014-05-01 00:04:00 5.129  9.286
</code></pre>

<pre><code class="r">#subset last 5 recs
last(myxts, &quot;5 mins&quot;)
</code></pre>

<pre><code>##                      [,1]   [,2]
## 2014-05-01 23:56:00 2.832 11.352
## 2014-05-01 23:57:00 5.660  9.725
## 2014-05-01 23:58:00 4.546  8.474
## 2014-05-01 23:59:00 4.305  7.306
## 2014-05-02 00:00:00 4.993 10.300
</code></pre>

</body>

</html>

